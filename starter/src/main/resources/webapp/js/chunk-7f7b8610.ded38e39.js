(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f7b8610"],{"54fe":function(e,t,i){"use strict";i.r(t);var s,a,n,r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"rt-overview padding"},[i("div",{staticClass:"base-info no-select"},[i("div",{staticClass:"text-bold text-lg no-select",staticStyle:{color:"rgba(0, 0, 0, 0.4)"}},[e._v("系统信息")]),i("div",{staticClass:"card-container flex justify-between"},[i("div",{staticClass:"left flex flex-direction justify-between radius shadow-blur\n            padding-sm flex-sub text-white-theme margin"},[e._m(0),e._m(1),i("div",{staticClass:"l-row padding-lr-xs flex justify-between"},[i("div",[e._v("节点数量：")]),i("div",{},[e._v(e._s(e.overView.onlineBrokerNum)+"/"+e._s(e.overView.brokerMetaNum))])]),i("div",{staticClass:"l-row padding-lr-xs flex justify-between"},[i("div",[e._v("运行时间：")]),i("div",[e._v(e._s(e.overView.earliestClusterTimeStr))])]),i("div",{staticClass:"l-row padding-lr-xs flex justify-between"},[i("div",[e._v("平台版本：")]),i("div",[e._v(e._s(e.overView.brokerVersion))])])]),i("div",{staticClass:"right flex-sub margin grid justify-between"},[i("div",{staticClass:"num-item text-white-theme"},[i("div",{staticClass:"msg-in item radius flex-sub shadow-blur margin-bottom-xs margin-right-xs"},[i("div",{staticClass:"padding-sm"},[e._v("消息流入")]),i("div",{staticClass:"flex align-center padding-lr"},[i("div",{staticClass:"text-xl text-white padding-right-sm"},[e._v(e._s(e.overView.inMsgNum))]),i("div",[e._v("条")])])])]),i("div",{staticClass:"num-item text-white-theme"},[i("div",{staticClass:"msg-out item radius flex-sub shadow-blur margin-bottom-xs margin-left-xs"},[i("div",{staticClass:"padding-sm"},[e._v("消息流出")]),i("div",{staticClass:"flex align-center padding-lr"},[i("div",{staticClass:"text-xl text-white padding-right-sm"},[e._v(e._s(e.overView.outMsgNum))]),i("div",[e._v("条")])])])]),i("div",{staticClass:"num-item text-white-theme"},[i("div",{staticClass:"client-num item radius flex-sub shadow-blur margin-top-xs margin-right-xs"},[i("div",{staticClass:"padding-sm"},[e._v("连接数")]),i("div",{staticClass:"flex align-center padding-lr"},[i("div",{staticClass:"text-xl text-white padding-right-sm"},[e._v(e._s(e.overView.clientNum))]),i("div",[e._v("个")])])])]),i("div",{staticClass:"num-item text-white-theme"},[i("div",{staticClass:"subscribe-num item radius flex-sub shadow-blur margin-top-xs margin-left-xs"},[i("div",{staticClass:"padding-sm"},[e._v("订阅数")]),i("div",{staticClass:"flex align-center padding-lr"},[i("div",{staticClass:"text-xl text-white padding-right-sm"},[e._v(e._s(e.overView.subscribeNum))]),i("div",[e._v("个")])])])])])])]),e._m(2)])},l=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"l-row padding-lr-xs flex justify-between"},[i("div",{staticClass:"text-bold text-lg"},[e._v("Jmq Broker")]),i("div",{staticClass:"round l-row-more flex justify-center align-center"},[i("i",{staticClass:"el-icon-more"})])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"l-row padding-lr-xs flex justify-between"},[i("div",[e._v("集群状态：")]),i("div",{staticClass:"flex align-center"},[i("div",{staticClass:"light round margin-right-sm shadow-blur-weight"}),e._v(" 运行中 ")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"broker-info no-select margin-top"},[i("div",{staticClass:"text-bold text-lg no-select title",staticStyle:{color:"rgba(0, 0, 0, 0.4)"}},[e._v("消息指标")]),i("div",{staticClass:"card-container flex justify-between"},[i("div",{staticClass:"left flex flex-direction margin padding-sm radius flex-sub shadow-blur"},[i("div",{staticClass:"text-white-theme"},[e._v("消息流入")]),i("canvas",{staticClass:"flex-sub",attrs:{id:"msg-in-canvas"}})]),i("div",{staticClass:"right flex flex-direction margin padding-sm radius flex-sub shadow-blur"},[i("div",{staticClass:"text-white-theme"},[e._v("消息流出")]),i("canvas",{staticClass:"flex-sub",attrs:{id:"msg-out-canvas"}})])])])}],o=(i("f8c2"),i("ed08")),d={name:"RealTimeOverview",data:function(){return{overView:{brokerMetaNum:0,onlineBrokerNum:0,earliestClusterTime:0,earliestClusterTimeStr:"",brokerVersion:0,inMsgNum:0,outMsgNum:0,clientNum:0,subscribeNum:0}}},created:function(){s=setInterval(this.reqOverviewData,1e3)},mounted:function(){this.initMsgInCanvas(),this.initMsgOutCanvas()},destroyed:function(){this.clearCustomInterval()},methods:{reqOverviewData:function(){var e=this;this.$http({url:this.$http.baseUrl("/broker/overview/real_time"),method:"GET"}).then((function(t){var i=t.data;if(!i||0!==i.code)return Promise.reject(i.msg);i.data.preSeconedInNum=void 0!==e.overView.preSeconedInNum?e.overView.inMsgNum:0,i.data.preSeconedOutNum=void 0!==e.overView.preSeconedOutNum?e.overView.outMsgNum:0,i.data.earliestClusterTimeStr=Object(o["e"])(((new Date).getTime()-new Date(i.data.earliestClusterTime).getTime())/1e3),e.overView=i.data})).catch((function(t){e.$message({showClose:!0,message:t,type:"error"})}))},initMsgInCanvas:function(){var e=this;this.$f2.Animate.registerAnimation("lineUpdate",(function(e,t){for(var i=e.get("cacheShape"),s=i.attrs,a=s.points,n=e.attr("points"),r=a.length,l=n.length,o=l-r,d=n[n.length-1],u=0;u<o;u++)a.push(d);e.attr(s),e.animate().to({attrs:{points:n},duration:800,easing:t.easing})}));var t=[];function i(t){t=t||0;var i=void 0===e.overView.preSeconedInNum||0===e.overView.preSeconedInNum?0:e.overView.inMsgNum-e.overView.preSeconedInNum;return{time:(new Date).getTime()+1e3*t,value:i}}t.push(i());var s=new this.$f2.Chart({id:"msg-in-canvas",pixelRatio:window.devicePixelRatio}),n={time:{type:"timeCat",mask:"HH:mm:ss",range:[0,1]},value:{tickCount:10,min:0}};s.source(t,n),s.axis("time",{line:null,tickLine:null,labelOffset:10,label:function(e,t,i){var s={text:""};return 0===t?(s.textAlign="left",s.text=e):t===i-1&&(s.textAlign="right",s.text=e),s.fill="#fff",s}}),s.axis("value",{labelOffset:20,label:function(e){var t={fill:"#fff"};return t},grid:function(e,t,i){return{stroke:"rgba(255,255,255,0.25)"}}}),s.line().position("time*value").animate({update:{animation:"lineUpdate"}}).color("#0be78c").size(3),s.render(),a=setInterval((function(){t.push(i()),s.changeData(t)}),1e3)},initMsgOutCanvas:function(){var e=this;this.$f2.Animate.registerAnimation("lineUpdate",(function(e,t){for(var i=e.get("cacheShape"),s=i.attrs,a=s.points,n=e.attr("points"),r=a.length,l=n.length,o=l-r,d=n[n.length-1],u=0;u<o;u++)a.push(d);e.attr(s),e.animate().to({attrs:{points:n},duration:800,easing:t.easing})}));var t=[];function i(t){t=t||0;var i=void 0===e.overView.preSeconedOutNum||0===e.overView.preSeconedOutNum?0:e.overView.outMsgNum-e.overView.preSeconedOutNum;return{time:(new Date).getTime()+1e3*t,value:i}}t.push(i());var s=new this.$f2.Chart({id:"msg-out-canvas",pixelRatio:window.devicePixelRatio}),a={time:{type:"timeCat",mask:"HH:mm:ss",range:[0,1]},value:{tickCount:10,min:0}};s.source(t,a),s.axis("time",{line:null,tickLine:null,labelOffset:10,label:function(e,t,i){var s={text:""};return 0===t?(s.textAlign="left",s.text=e):t===i-1&&(s.textAlign="right",s.text=e),s.fill="#fff",s}}),s.axis("value",{labelOffset:20,label:function(e){var t={fill:"#fff"};return t},grid:function(e,t,i){return{stroke:"rgba(255,255,255,0.25)"}}}),s.line().position("time*value").animate({update:{animation:"lineUpdate"}}).color("#0be78c").size(3),s.render(),n=setInterval((function(){t.push(i()),s.changeData(t)}),1e3)},clearCustomInterval:function(){clearInterval(s),clearInterval(a),clearInterval(n)}}},u=d,c=(i("5a51"),i("cba8")),v=Object(c["a"])(u,r,l,!1,null,null,null);t["default"]=v.exports},5983:function(e,t,i){},"5a51":function(e,t,i){"use strict";i("5983")}}]);